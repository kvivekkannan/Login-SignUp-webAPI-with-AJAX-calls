@model Project01.Models.UserDetails

@{
    ViewBag.Title = "DeleteUser";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<h2>DeleteUser</h2>

<h3>Are you sure you want to delete this?</h3>
<div>
    <h4>UserDetails</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>@Html.DisplayNameFor(model => model.UserId)</dt>
        <dd id="id">@Html.DisplayFor(model => model.UserId)</dd>
        <dt>
            @Html.DisplayNameFor(model => model.FirstName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.FirstName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.LastName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.LastName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EmailAddress)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EmailAddress)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.UserName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.UserName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Password)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Password)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ConfirmPassword)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ConfirmPassword)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ContactNumber)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ContactNumber)
        </dd>

    </dl>

    @using (Html.BeginForm()) {
        @Html.AntiForgeryToken()

        <div class="form-actions no-color">
            <input id="deleteConfirmBtn" type="button" value="Delete" data-model-id="@Model.UserId" class="btn btn-default"/> |
            @Html.ActionLink("Back to List", "Index")
        </div>
    }
</div>
<script>
    $(document).ready(function(){
        $("#deleteConfirmBtn").click(function (e) {
            e.preventDefault();

            var id = $(this).attr('data-model-id');
            console.log(id);
            var msg = confirm("Are you sure to confirm deleting this record?");
            //debugger;
            if (msg) {
                $.ajax({
                    type: "POST",
                    url: "https://localhost:44328/Home/DeleteUserSubmit?id=" + id,
                    data: { id: id }
                });
            }

        })

    })
    //"https://localhost:44328/api/UserDetails/DeleteUserDetails?id=" + id
    //function deleteUserSubmit() {
    //    var url = "https://localhost:44328/api/UserDetails/DeleteUser";
    //    var id = $(this).data("model-id");
    //    debugger;
    //    $.ajax({
    //        type: 'POST',
    //        url: url,
    //        data: id,
    //        success: function (data) {
    //            alert("Record deleted");
    //        },
    //        error: function (data) {
    //            alert("Deletion unsuccessful");
    //        }

    //    })
    //}
    //$("#deleteConfirmBtn").submit(function () {
    //    var Id = $(this).data("model-id");
    //    var url = "https://localhost:44328/api/UserDetails/DeleteUser" + StudentId;
    //    debugger;
    //    $.ajax({
    //        url: url,
    //        type: 'Delete',
    //        data: Id
    //    }).done(function () {
    //        alert("Deleted")
    //    });
    //});
    //    }).error(function () {
    //    alert("Failed")
    //});
</script>